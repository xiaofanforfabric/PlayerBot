# FanMacro 积木式编程 GUI - 快速开始

## ✅ 编译成功！

项目已成功编译，GUI 应用程序已创建。

## 🚀 运行 GUI

### Windows
```cmd
run-gui.bat
```

### Linux/Mac
```bash
./run-gui.sh
```

### 或使用 Gradle
```bash
./gradlew run
```

## 📖 使用说明

### 1. 界面布局

- **左侧**：积木面板 - 显示所有可用的积木类型
- **中间**：画布 - 拖拽和放置积木的区域
- **右侧**：代码预览 - 实时显示生成的 FanMacro 代码
- **顶部**：工具栏 - 新建、保存、加载、导出等功能

### 2. 基本操作

#### 添加积木
1. 在左侧积木面板中找到需要的积木
2. **点击积木**，会在画布中央创建一个新积木
3. 拖拽积木到合适的位置

#### 移动积木
- 直接**拖拽积木**到画布上的任意位置

#### 删除积木
- **双击积木**删除
- 或**右键点击积木**，选择"删除"

#### 连接积木
- 将积木靠近其他积木时，会自动连接
- 连接的积木会显示连接线

### 3. 保存宏文件

1. 在顶部工具栏的"宏名称"输入框中输入文件名（不含 .txt）
2. 点击"保存宏文件"按钮
3. 选择保存目录（默认 `.minecraft/config/do/`）
4. 宏文件将保存为 `.txt` 格式

### 4. 加载宏文件

1. 点击"加载宏文件"按钮
2. 选择要加载的 `.txt` 宏文件
3. 代码预览会更新（注意：反向解析功能待实现）

### 5. 导出代码

1. 点击"导出代码"按钮
2. 选择保存位置
3. 代码将保存为文本文件

## 🎨 积木类型

### 命令积木（蓝色）
- 移动到坐标
- 挖掘矿石
- 停止任务
- 允许/禁止破坏
- 允许/禁止放置
- 执行原版命令（/home, /spawn）

### 条件积木（黄色）
- 如果位置是
- 如果时间是
- 检查有物品
- 检查无物品
- 检查位置
- 检查时间

### 控制积木（绿色）
- 等待 X 秒/分钟/小时
- 一直等待
- 结束
- 运行宏

### 函数积木（紫色）
- 定义函数（前台）
- 定义函数（后台）
- 调用函数
- 主入口点（fan_main）

## ⚠️ 注意事项

1. **占位符**：当前版本中，积木中的占位符（如 `{x}`, `{y}`, `{item}` 等）会使用默认值。需要手动编辑生成的代码来替换这些占位符。

2. **反向解析**：从代码解析回积木的功能尚未实现，加载宏文件时只会显示代码预览。

3. **复杂结构**：复杂的嵌套结构（如 if-else）可能需要手动编辑代码。

4. **文件路径**：默认保存路径为 `.minecraft/config/do/`，如果目录不存在，需要手动选择保存位置。

## 🔧 故障排除

### 问题：GUI 无法启动
- 确保已安装 Java 17 或更高版本
- 检查 JavaFX 依赖是否正确下载

### 问题：积木无法拖拽
- 确保点击的是积木本身，而不是画布
- 尝试重新添加积木

### 问题：代码生成不正确
- 检查积木是否正确连接
- 查看右侧代码预览，手动编辑不正确的部分

## 📝 示例

### 创建一个简单的挖矿宏

1. 点击"主入口点"积木（橙色）
2. 点击"移动到坐标"积木（蓝色）
3. 点击"挖掘矿石"积木（蓝色）
4. 将积木连接在一起
5. 查看右侧代码预览
6. 手动编辑代码中的坐标和矿石类型
7. 保存宏文件

生成的代码示例：
```
fan_main:
    do #goto 0 0 0;
    do #mine iron_ore;
```

## 🎉 开始使用

现在你可以开始使用积木式编程界面创建 FanMacro 宏文件了！

享受编程的乐趣！🎮

